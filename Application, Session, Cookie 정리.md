# Java - JSP/Servlet

## Application / Session / Cookie 정리

---

모두 **상태를 저장**하는 도구. 

**1. Application Context** (Servlet Context)

- 서블릿 컨텍스트로, 서블릿들 간의 문맥을 저장할 수 있는 곳이자, 자원을 공유할 수 있는 저장소.
- WAS에 공간이 마련되기 때문에 생명주기 또한 WAS가 시작해서 종료될 때 까지.
- 사이트를 방문한 누구나 상태값을 서버(웹 어플리케이션)에 application 객체를 저장하여 사용하도록 한다.

**2. Session**

- 하나의 접속이라고 생각하면 된다. 예를 들어 하나는 크롬, 하나는 익스플로러를 열면 두개의 session이 생기고 이 둘은 독립적이다. session도 WAS에 저장된다.

- 웹 서버가 현재 사용자를 구분하는 방식.

- was에서 누구나 저장해놓을 수 있는 공간이 application라면, 그 중 개인별로 사물함을 제공한 것이 session.

- 간단하게 말하자면 애플리케이션은 대상에 상관없이 웹 어플리케이션, 즉 서버에 값을 저장하고, 세션은 현재 접속한 사용자마다 개별적으로 공간을 부여받도록 하여 값을 저장.

- 따라서 세션 값이 저장되면 한 브라우저에서 다른 창을 열었을 때도 같은 세션값을 공유할 수 있게 된다.

- 클라이언트가 사이트에 처음 방문했을 경우 그 사용자를 위한 세션은 존재하지 않는다. 

- 사이트에서 나갈 때, WAS에 의해 세션(SID, Session ID)을 발급받게 된다.

- 이후 다시 사용자가 사이트에 방문하여 SID를 가져오면 세션의 값을 넣어서 사용할 수 있다. 

- 같은 브라우저라면 같은 SID, 세션값을 사용하고, 다른 브라우저는 새로운 세션값을 받는다. 

- 동일 컴퓨터에서 같은 사이트를 사용하더라도 크롬과 익스플로러의 세션값은 다르게 나타나는 것이다.

- 서버의 기존 연결정보를 저장함으로써 클라이언트와 서버가 지속적으로 연결을 유지할 수 있다.

- 각각의 이름이 적힌 사물함과 같다.

**3. Cookie**

- 클라이언트 PC에 저장된다. 
- 특정한 URL이 특정 쿠기가 이용될 수 있도록 설정할 수 있다. 
  - setPath([url])
  - 쿠키에 url을 설정함으로써 쿠키를 해당 url과 관련된 서블릿에만 사용되도록)
- 또한 만료시간을 설정할 수 있다. 그 기간 동안 값을 유지하여 사용 가능.
  - setMaxAge([second])
  - 따로 설정하지 않았다면, 브라우저가 닫혔을 때 사라진다.
  - 설정을 해주면 쿠키는 브라우저 메모리에 연결된 외부 메모리에 저장.
- 상태 저장을 위해 application과 session이 서버 측에 저장된 것과 달리, Cookie는 클라이언트 측에 저장되어 사용.