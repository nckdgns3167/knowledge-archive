# React 메모장

---

### 불변성이 중요한 이유 

- 리엑트 공식 문서 중에서...

> ✅ 복잡한 특징들을 단순하게 만듦.
>
> - 특정 행동을 취소하고 다시 실행하는 기능 구현이 쉬움
> - 이력을 유지하고 나중에 재사용할 수 있다.
>
> ✅ 변화를 감지함.
>
> - 감지는 복제가 가능한 객체를 이전 사본과 비교하고 전체 객체 트리를 돌아야 하는데, 불변 객체에서 변화를 감지하는 것은 상당히 쉽다. 참조하고 있는 불변 객체가 이전 객체와 다르다면 객체는 변한 것이다.
>
> ✅ React에서 다시 렌더링하는 시기를 결정함.
>
> - 불변성의 가장 큰 장점은 React에서 *순수 컴포넌트*를 만드는 데 도움을 준다는 것. 변하지 않는 데이터는 변경이 이루어졌는지 쉽게 판단할 수 있으며 이를 바탕으로 컴포넌트가 다시 렌더링할지를 결정할 수 있다.

- 모 블로그 내용

  > React가 불변성을 지키는 이유는 부모컴포넌트가 
  >
  > re-rendering 되거나 state,props가 변화될 때 렌더링이 일어나게 된다.
  >
  > 
  >
  > 근데 렌더링을 할지 말지 판단하기 위해 state가 변화되는지를 판단한다.
  >
  > 그 과정에서 state 객체 내의 모든 value를 다 깊은 비교하면 당연하게도 효율적이지 않다.
  >
  > 그렇기 때문에 이전 객체와 현재 객체를 얕은 비교로 판단하기 때문에 불변성의 유지가 중요하다.
  >
  >  
  >
  > state를 직접 변경하게 되면 value 값은 바뀌지만 참조 값은 바뀌지 않으므로 렌더링이 일어나지 않는다.
  >
  > mutable한 상태를 사용하게 되면 리액트 돔이 제대로 된 추적을 할 수 없을 것이고,
  >
  > 예기치 않은 사이드 이펙트를 발생시킬 수 있다.
  >
  > 
  >
  > ### 어떻게 불변성을 지킬까?
  >
  > 스프레드 문법, map, filter, slice, reduce 와 같은 새로운 배열을 반환하는 메소드들을 활용한다.
  >
  >  
  >
  > setState를 이용할 때 원시타입 경우에는 값을 바로 넣어주어도 되지만
  >
  > 참조타입인 경우에는 새로운 객체나 배열을 생성한 후 값을 넣어주어야 한다. 

  출처: https://gusehd66.tistory.com/entry/React-React%EA%B0%80-%EB%B6%88%EB%B3%80%EC%84%B1%EC%9D%84-%EC%A7%80%ED%82%A4%EB%8A%94-%EC%9D%B4%EC%9C%A0?category=1216213
